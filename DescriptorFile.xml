<?xml version="1.0" encoding="utf-8" ?>

<synapse-unit-test>
    <artifact>
        <sequence xmlns="http://ws.apache.org/ns/synapse" name="conf:/StoreSend">
            <axis2ns4:store xmlns:axis2ns4="http://ws.apache.org/ns/synapse" messageStore="JMSMS" sequence="conf:/repository/components/org.wso2.carbon.throttle/templates"></axis2ns4:store>
            <send>
                <endpoint>
                    <address uri="http://localhost:9000/services/SimpleStockQuoteService"></address>
                </endpoint>
            </send>
        </sequence>
    </artifact>

    <artifact-name>conf:/StoreSend</artifact-name>
    <artifact-type>sequence</artifact-type>

    <test-cases-count>2</test-cases-count>
    <test-cases>
        <test-case-1>
            <input-xml-payload><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/\">\n"
                                    + "   <soapenv:Header/>\n"
                                    + "   <soapenv:Body>\n"
                                    + "        <addCustomer>\n"
                                    + "            <name>Smith</name>\n"
                                    + "            <tpNumber>0834558649</tpNumber>\n"
                                    + "            <address>No. 456, Gregory Road, Los Angeles</address>\n"
                                    + "        </addCustomer>\n"
                                    + "   </soapenv:Body>\n"
                                    + "</soapenv:Envelope>]]>
            </input-xml-payload>

            <expected-property-values><![CDATA[<?xml version='1.0' encoding='utf-8'?>" +
                                        "<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\">" +
                                        "<soapenv:Body>" + <echoInt> xmlns=\"http://echo.services.core.carbon.wso2.org\">"
                                                + "      <!--0 to 1 occurrence-->" + "<in>35</in>" + "</echoInt> +
                                            "</soapenv:Body></soapenv:Envelope>]]>
            </expected-property-values>

            <expected-payload>
                <![CDATA[<soapenv:Body xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><a>newPayload</a></soapenv:Body>]]>
            </expected-payload>

        </test-case-1>
        <test-case-2>
            <input-xml-payload>Hi
            </input-xml-payload>

            <expected-property-values>test
            </expected-property-values>

            <expected-payload>
                test2
            </expected-payload>

        </test-case-2>
    </test-cases>

    <mock-services-count>1</mock-services-count>
    <mock-services>
        <mock-service>
            <service-name>Hospital</service-name>
            <mock-service-url>http://localhost:9090/query/doctor</mock-service-url>
            <mock-service-type>POST</mock-service-type>
            <mock-service-json-payload>
                {
                    "name":"John Smith",
                    "age":23,
                    "hospital":"Central Hospital"
                }
            </mock-service-json-payload>
            <mock-service-expected-json-response>
                {
                    "hospital":"Central Hospital"
                }
            </mock-service-expected-json-response>
        </mock-service>
    </mock-services>
</synapse-unit-test>