<?xml version="1.0" encoding="utf-8" ?>

<synapse-unit-test>
    <!--<artifact>-->
        <!--<sequence xmlns="http://ws.apache.org/ns/synapse"  trace="disable" name="TestSeq">-->
            <!--<log description="Request Log" level="custom">-->
                <!--<property name="message" value="Good Morning"/>-->
            <!--</log>-->

            <!--<send>-->
                <!--<endpoint name="QueryDoctorEP" xmlns="http://ws.apache.org/ns/synapse">-->
                    <!--<http method="get" uri-template="http://localhost:9091/hello/sayHello"/>-->
                <!--</endpoint>-->
            <!--</send>-->
        <!--</sequence>-->
    <!--</artifact>-->
    <artifact>
        <proxy xmlns="http://ws.apache.org/ns/synapse" name="proxyTest" startOnLoad="true" statistics="disable" trace="disable" transports="http,https">
            <target>
                <inSequence>
                    <log level="full" />
                    <enrich>
                        <source clone="true" type="inline">
                            <xsd:symbol xmlns:xsd="http://services.samples/xsd">SUN</xsd:symbol>
                        </source>
                        <target xmlns:ser="http://services.samples" xmlns:xsd="http://services.samples/xsd" action="child" xpath="//ser:getQuote/ser:request" />
                    </enrich>
                    <log level="full" />
                    <respond />
                </inSequence>
            </target>
            <description />
        </proxy>
    </artifact>

    <artifact-name>proxyTest</artifact-name>
    <artifact-type>proxy</artifact-type>

    <test-cases-count>1</test-cases-count>
    <test-cases>
        <test-case-1>
            <input-xml-payload>
                <![CDATA[
                        <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ser="http://services.samples" xmlns:xsd="http://services.samples/xsd">
                           <soapenv:Header />
                           <soapenv:Body>
                              <ser:getQuote>
                                 <!--Optional:-->
                                 <ser:request>
                                    <!--Optional:-->
                                    <xsd:symbol>WSO2</xsd:symbol>
                                 </ser:request>
                              </ser:getQuote>
                           </soapenv:Body>
                        </soapenv:Envelope>
                ]]>
            </input-xml-payload>

            <expected-property-values>
                <![CDATA[<?xml version='1.0' encoding='UTF-8' ?>]]><empty/>
            </expected-property-values>

            <expected-payload>
                <![CDATA[<?xml version='1.0' encoding='UTF-8' ?>]]><empty/>
            </expected-payload>

        </test-case-1>
        <!--<test-case-2>-->
            <!--<input-xml-payload>Hi-->
            <!--</input-xml-payload>-->

            <!--<expected-property-values>test-->
            <!--</expected-property-values>-->

            <!--<expected-payload>-->
                <!--test2-->
            <!--</expected-payload>-->

        <!--</test-case-2>-->
    </test-cases>

    <mock-services-count>1</mock-services-count>
    <mock-services>
        <mock-service>
            <service-name>Hospital</service-name>
            <mock-service-url>http://localhost:9090/query/doctor</mock-service-url>
            <mock-service-type>POST</mock-service-type>
            <mock-service-json-payload>
                {
                    "name":"John Smith",
                    "age":23,
                    "hospital":"Central Hospital"
                }
            </mock-service-json-payload>
            <mock-service-expected-json-response>
                {
                    "hospital":"Central Hospital"
                }
            </mock-service-expected-json-response>
        </mock-service>
    </mock-services>
</synapse-unit-test>

        <!--<sequence xmlns="http://ws.apache.org/ns/synapse" name="conf:/StoreSend">-->
        <!--<axis2ns4:store xmlns:axis2ns4="http://ws.apache.org/ns/synapse" messageStore="JMSMS" sequence="conf:/repository/components/org.wso2.carbon.throttle/templates"></axis2ns4:store>-->
        <!--<send>-->
        <!--<endpoint>-->
        <!--<address uri="http://localhost:9000/services/SimpleStockQuoteService"></address>-->
        <!--</endpoint>-->
        <!--</send>-->
        <!--</sequence>-->

        <!--<proxy xmlns="http://ws.apache.org/ns/synapse" name="TestProxy">-->
        <!--<target>-->
        <!--<endpoint>-->
        <!--<address uri="http://localhost:9000/services/SimpleStockQuoteService\"/>-->
        <!--</endpoint>-->
        <!--<outSequence>-->
        <!--<send/>-->
        <!--</outSequence>-->
        <!--</target>-->
        <!--</proxy>-->